<H3>Grafico Comparativo</H3>
<h4>Latitud: {{latitud}}</h4>
<h4>Longitud: {{longitud}}</h4>
<form action="">
  <div class="form-group d-flex align-items-center">
    <label for="socInicial" class="me-2">SOC Inicial:</label>
    <input type="number" class="form-control w-auto" placeholder="SOC inicial"
    required name="socInicial" [(ngModel)]="bateria.soc_inicial"
   [min]="1"
   [max]="100"
    (change)="simularSistema(1)">
</div>

<div class="form-group d-flex align-items-center">
  <label for="socInicial" class="me-2">Corriente de Descarga:</label>
  <input type="number" class="form-control w-auto" placeholder="SOC inicial"
  required name="socInicial" [(ngModel)]="amperios_descarga"
 [min]="0"
 [max]="100"
  (change)="simularSistema(1)">
</div>

</form>

<h1>Crear panel Soalr Propio</h1>
     <!-- Formulario para crear panel solar -->
     <div class="row" *ngIf="!filtro">
      <div class="col-md-12">
          <div class="card shadow-sm">
              <div class="card-header bg-primary text-white">
                  <h4 class="card-title mb-0">
                      <i class="fa-solid fa-solar-panel me-2"></i>
                      Crear Panel Solar
                  </h4>
              </div>
              <div class="card-body">
                  <form #panelForm="ngForm" appUnambiguousRole
                      (ngSubmit)="manejarAccion(panelForm)">
                      <div class="row">
                          <!-- Columna 1 -->
                          <div class="col-md-4">
                              <div class="form-group">
                                  <label for="potencia" class="form-label">Potencia
                                      (W)</label>
                                  <input type="number" id="potencia" name="potencia"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.potencia" #potencia="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="potencia.invalid && (potencia.dirty || potencia.touched)"
                                      class="text-danger">
                                      La potencia en Watts es requerida.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="voc" class="form-label">VOC (V)</label>
                                  <input type="number" id="voc" name="voc"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.voc" #voc="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="voc.invalid && (voc.dirty || voc.touched)"
                                      class="text-danger">
                                      El VOC es requerido.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="isc" class="form-label">ISC (I)</label>
                                  <input type="number" id="isc" name="isc"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.isc" #isc="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="isc.invalid && (isc.dirty || isc.touched)"
                                      class="text-danger">
                                      El ISC es requerido.
                                  </div>
                              </div>

                              <div class="form-group">
                                <label for="tc_of_voc" class="form-label">Coeficiente
                                    VOC/Temperatura (%)</label>
                                <input type="number" id="tc_of_voc" name="tc_of_voc"
                                    class="form-control" required
                                    [(ngModel)]="panel_propio.tc_of_voc"
                                    #tc_of_voc="ngModel" [disabled]="formBloqueado">
                                <div *ngIf="tc_of_voc.invalid && (tc_of_voc.dirty || tc_of_voc.touched)"
                                    class="text-danger">
                                    El coeficiente VOC/temperatura es requerido.
                                </div>
                            </div>

                          </div>

                          <!-- Columna 2 -->
                          <div class="col-md-4">
                              <div class="form-group">
                                  <label for="eficiencia" class="form-label">Eficiencia
                                      (%)</label>
                                  <input type="number" id="eficiencia" name="eficiencia"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.eficiencia"
                                      #eficiencia="ngModel" [disabled]="formBloqueado">
                                  <div *ngIf="eficiencia.invalid && (eficiencia.dirty || eficiencia.touched)"
                                      class="text-danger">
                                      La eficiencia es requerida.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="tensionNominal" class="form-label">Tensión
                                      Nominal (V)</label>
                                  <input type="number" id="tensionNominal"
                                      name="tensionNominal" class="form-control" required
                                      [(ngModel)]="panel_propio.tension"
                                      #tensionNominal="ngModel" [disabled]="formBloqueado">
                                  <div *ngIf="tensionNominal.invalid && (tensionNominal.dirty || tensionNominal.touched)"
                                      class="text-danger">
                                      La tensión nominal es requerida.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="vmpp" class="form-label">VMPP (V)</label>
                                  <input type="number" id="vmpp" name="vmpp"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.vmpp" #vmpp="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="vmpp.invalid && (vmpp.dirty || vmpp.touched)"
                                      class="text-danger">
                                      El VMPP es requerido.
                                  </div>
                              </div>

                              
                            <div class="form-group">
                                <label for="tc_of_pmax" class="form-label">Coeficiente
                                    Potencia/Temperatura (%)</label>
                                <input type="number" id="tc_of_pmax" name="tc_of_pmax"
                                    class="form-control" required
                                    [(ngModel)]="panel_propio.tc_of_pmax"
                                    #tc_of_pmax="ngModel" [disabled]="formBloqueado">
                                <div *ngIf="tc_of_pmax.invalid && (tc_of_pmax.dirty || tc_of_pmax.touched)"
                                    class="text-danger">
                                    El coeficiente Potencia/temperatura es requerido.
                                </div>
                            </div>
                            
                          </div>

                          <!-- Columna 3 -->
                          <div class="col-md-4">
                              <div class="form-group">
                                  <label for="impp" class="form-label">IMPP (I)</label>
                                  <input type="number" id="impp" name="impp"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.impp" #impp="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="impp.invalid && (impp.dirty || impp.touched)"
                                      class="text-danger">
                                      El IMPP es requerido.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="noct" class="form-label">NOCT (%)</label>
                                  <input type="number" id="noct" name="noct"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.noct" #noct="ngModel"
                                      [disabled]="formBloqueado">
                                  <div *ngIf="noct.invalid && (noct.dirty || noct.touched)"
                                      class="text-danger">
                                      El NOCT es requerido.
                                  </div>
                              </div>
                              <div class="form-group">
                                  <label for="tc_of_isc" class="form-label">Coeficiente
                                      ISC/Temperatura (%)</label>
                                  <input type="number" id="tc_of_isc" name="tc_of_isc"
                                      class="form-control" required
                                      [(ngModel)]="panel_propio.tc_of_isc"
                                      #tc_of_isc="ngModel" [disabled]="formBloqueado">
                                  <div *ngIf="tc_of_isc.invalid && (tc_of_isc.dirty || tc_of_isc.touched)"
                                      class="text-danger">
                                      El coeficiente ISC/temperatura es requerido.
                                  </div>
                              </div>

                          </div>
                      </div>

                      <!-- Botón de envío -->
                      <div class="text-center mt-4">
                          <button class="btn btn-primary btn-lg" type="submit">
                              {{ obtenerTextoBoton() }}
                          </button>
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </div>



<div class="card-body">
  <!--Inicia nuevo diseño  -->
  <div class="container-fluid">
    <div class="row">
      <!-- Lateral izquierdo -->
      <div class="col-md-3">
        <div class="btn-group-vertical w-100" role="group" aria-label="Months">
          <button type="button" class="btn btn-secondary" (click)="simularSistema(1)">Enero</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(2)">Febrero</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(3)">Marzo</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(4)">Abril</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(5)">Mayo</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(6)">Junio</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(7)">Julio</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(8)">Agosto</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(9)">Septiembre</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(10)">Octubre</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(11)">Noviembre</button>
          <button type="button" class="btn btn-secondary" (click)="simularSistema(12)">Diciembre</button>
          <!-- Agregar botones para los otros meses -->
        </div>
      </div>

      <!-- Lateral derecho -->
      <div class="col-md-9">
        <div class="row">
          <div class="col-lg-6"> <canvas id="ChartComparativo"></canvas></div>
        </div>
      </div>
    </div>
  </div>
  <!--Finaliza Nuevo diseño  -->

</div>

<h4>panel Solar</h4>
<div>{{panel_propio.voc}}</div>
<h4>panel Solar seleccioando</h4>
<div>{{panel_seleccionado.voc}}</div>